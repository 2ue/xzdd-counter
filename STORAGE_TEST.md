# 本地存储功能测试说明

## 测试步骤

### 1. 访问应用
打开浏览器访问：`http://localhost:6153`

### 2. 测试本地存储功能
在页面顶部会看到"本地存储测试"区域，包含三个按钮：

- **测试本地存储**：保存测试数据到本地存储
- **清除测试数据**：清除本地存储中的数据
- **检查当前数据**：查看当前本地存储中的数据状态

### 3. 验证数据持久化
1. 点击"测试本地存储"按钮
2. 应该看到"✅ 本地存储测试成功！数据已正确保存和加载"
3. 刷新页面（F5或Ctrl+R）
4. 数据应该仍然存在，不会丢失

### 4. 测试麻将计分功能
1. 添加几个玩家（如：张三、李四、王五、赵六）
2. 设置游戏参数（如：8番封顶，开启呼叫转移）
3. 添加一些胡牌或杠牌事件
4. 刷新页面，验证所有数据是否保持

### 5. 测试重置功能
1. 点击"重置游戏"按钮
2. 所有数据应该被清除
3. 刷新页面，确认数据确实被清除

## 预期结果

### ✅ 成功情况
- 数据正确保存到localStorage
- 刷新页面后数据不丢失
- 控制台显示详细的保存/加载日志
- 重置功能正常工作

### ❌ 失败情况
- 数据保存失败（检查浏览器控制台错误）
- 刷新后数据丢失
- 页面加载时出现错误

## 调试信息

打开浏览器开发者工具（F12），查看控制台输出：

```
🔄 正在加载游戏状态...
✅ 从本地存储加载游戏状态: {players: 4, events: 2, settings: {...}}
✅ 游戏状态加载完成
💾 正在保存游戏状态...
✅ 游戏状态已保存到本地存储: {players: 4, events: 2, settings: {...}}
```

## 浏览器兼容性

- ✅ Chrome/Edge (推荐)
- ✅ Firefox
- ✅ Safari
- ❌ IE (不支持)

## 故障排除

### 问题1：数据不保存
- 检查浏览器是否启用了localStorage
- 检查是否有足够的存储空间
- 查看控制台错误信息

### 问题2：数据加载失败
- 检查localStorage中的数据格式
- 清除浏览器缓存后重试
- 检查JSON解析错误

### 问题3：页面刷新后数据丢失
- 确认localStorage功能正常
- 检查浏览器隐私设置
- 尝试使用无痕模式测试 