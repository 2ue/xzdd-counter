# 番型叠加使用示例

## 新的番型系统

现在支持番型叠加，分为基础番型和额外番型：

### 基础番型（只能选择一个）
- **小胡**: 0番
- **大对子**: 1番
- **金钩钓**: 2番
- **小七对**: 2番
- **龙七对**: 3番
- **清一色**: 2番

### 额外番型（可以叠加多个）
- **杠上花**: 额外2番
- **杠上炮**: 额外1番
- **海底捞**: 额外1番

## 使用示例

### 示例1：清一色海底捞自摸
1. **基础番型**: 选择"清一色"（2番）
2. **额外番型**: 勾选"海底捞"（额外1番）
3. **胡牌方式**: 选择"自摸"（+1分）
4. **计算结果**: 2番(清一色) + 1番(海底捞) + 1分(自摸) = 4分

### 示例2：清一色自摸
1. **基础番型**: 选择"清一色"（2番）
2. **额外番型**: 不选择任何额外番型
3. **胡牌方式**: 选择"自摸"（+1分）
4. **计算结果**: 2番(清一色) + 1分(自摸) = 3分

### 示例3：大对子杠上花点炮
1. **基础番型**: 选择"大对子"（1番）
2. **额外番型**: 勾选"杠上花"（额外2番）
3. **胡牌方式**: 选择"点炮"（不加分）
4. **计算结果**: 1番(大对子) + 2番(杠上花) = 3分

### 示例4：龙七对海底捞杠上炮自摸
1. **基础番型**: 选择"龙七对"（3番）
2. **额外番型**: 勾选"海底捞"和"杠上炮"（额外1番 + 额外1番）
3. **胡牌方式**: 选择"自摸"（+1分）
4. **计算结果**: 3番(龙七对) + 1番(海底捞) + 1番(杠上炮) + 1分(自摸) = 6分

## 操作步骤

### 1. 添加胡牌事件
1. 选择事件类型为"胡牌"
2. 选择获胜者和失败者
3. 选择基础番型（必选一个）
4. 选择额外番型（可选多个）
5. 选择胡牌方式（自摸/点炮）
6. 查看番数预览确认计算正确
7. 点击"添加事件"

### 2. 番数预览功能
在添加事件时，系统会实时显示番数计算：
- 显示基础番数
- 显示额外番数
- 显示自摸加分
- 显示最终得分

### 3. 常见组合示例

| 组合 | 基础番型 | 额外番型 | 胡牌方式 | 总番数 | 最终得分 |
|------|----------|----------|----------|--------|----------|
| 清一色海底捞自摸 | 清一色(2番) | 海底捞(1番) | 自摸 | 3番 | 4分 |
| 清一色自摸 | 清一色(2番) | 无 | 自摸 | 2番 | 3分 |
| 大对子杠上花点炮 | 大对子(1番) | 杠上花(2番) | 点炮 | 3番 | 3分 |
| 龙七对海底捞杠上炮自摸 | 龙七对(3番) | 海底捞(1番)+杠上炮(1番) | 自摸 | 5番 | 6分 |
| 小胡自摸 | 小胡(0番) | 无 | 自摸 | 0番 | 1分 |

## 注意事项

1. **基础番型**: 必须选择一个，不能多选
2. **额外番型**: 可以多选，会叠加计算
3. **自摸加分**: 自摸额外加1分，点炮不加分
4. **封顶处理**: 如果设置了封顶番数，超过封顶的番数会被限制
5. **数据持久化**: 所有事件都会自动保存到本地存储

## 测试建议

1. **简单测试**: 先测试单个番型的计算
2. **叠加测试**: 测试多个额外番型的叠加
3. **边界测试**: 测试封顶番数的限制
4. **持久化测试**: 刷新页面验证数据保存 